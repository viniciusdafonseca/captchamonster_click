(()=>{"use strict";var e={50852:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.onInvocation=t.invokeInRuntime=t.invokeInTab=void 0;t.invokeInTab=(e,t,...n)=>new Promise(((s,o)=>{chrome.tabs.sendMessage(e,{name:t,args:n},(e=>{"success"===(null==e?void 0:e.type)?s(e.result):"fail"===(null==e?void 0:e.type)&&"string"==typeof e.cause?o(new Error(e.cause)):chrome.runtime.lastError?o(chrome.runtime.lastError):o(new Error(`Unknown error occurred while invoking the method ${t}`))}))}));t.invokeInRuntime=(e,...t)=>new Promise(((n,s)=>{chrome.runtime.sendMessage({name:e,args:t},(t=>{"success"===(null==t?void 0:t.type)?n(t.result):"fail"===(null==t?void 0:t.type)&&"string"==typeof t.cause?s(new Error(t.cause)):chrome.runtime.lastError?s(chrome.runtime.lastError):s(new Error(`Unknown error occurred while invoking the method ${e}`))}))}));t.onInvocation=(e,t)=>{chrome.runtime.onMessage.addListener(((n,s,o)=>{if(s.id===chrome.runtime.id&&"object"==typeof n&&(null==n?void 0:n.name)===e)return Promise.resolve().then((()=>t(s,...n.args||[]))).then((e=>{o({type:"success",result:e})})).catch((e=>{o({type:"fail",cause:e instanceof Error?e.message:"string"==typeof e?e:"Unknown error"})})),!0}))}}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}(()=>{const e=n(50852),t=new Promise((e=>{window.addEventListener("message",(t=>{"geetestHandlerReady"===t.data.type&&e()}))}));class Geetest{constructor(n){this.prepareContainer=()=>{const e=document.querySelector(this._containerSelector);if(!e)return;if(!e.querySelector(".geetest_form")){const t=this._config.width||"300px";e.insertAdjacentHTML("beforeend",`<div class="geetest_holder geetest_wind geetest_detect" style="width: ${t};">\n                        <div class="geetest_form">\n                            <input type="hidden" name="geetest_challenge">\n                            <input type="hidden" name="geetest_validate">\n                            <input type="hidden" name="geetest_seccode">\n                        </div>\n                    </div>`)}},this.setResponse=()=>{if(!document.querySelector(this._containerSelector))return;if(!this._taskResponse)throw new Error("Geetest not solved yet");const e=document.querySelector(this._containerSelector+" input[name=geetest_challenge]");e instanceof HTMLInputElement&&(e.value=this._taskResponse.challenge);const t=document.querySelector(this._containerSelector+" input[name=geetest_validate]");t instanceof HTMLInputElement&&(t.value=this._taskResponse.validate);const n=document.querySelector(this._containerSelector+" input[name=geetest_seccode]");n instanceof HTMLInputElement&&(n.value=this._taskResponse.seccode)},this.startResolving=()=>{(0,e.invokeInRuntime)("AnalyticService:track",{name:"Geetest"}),t.then((()=>{window.postMessage({type:"geetestCreateTask",params:{gt:this._config.gt,challenge:this._config.challenge,geetestApiServerSubdomain:this._config.api_server,geetestGetLib:this._config.getLib,geetestContainerSelector:this._containerSelector}},location.origin)}))},this.appendTo=e=>(this._containerSelector=e,"bind"!==this._config.product&&(this.prepareContainer(),this.startResolving(),setTimeout((()=>{"function"==typeof this._onReady&&this._onReady()}),0)),this),this.bindForm=()=>(this.prepareContainer(),this._taskResponse&&this.setResponse(),this),this.onReady=e=>(this._onReady=e,"bind"===this._config.product&&"function"==typeof this._onReady&&this._onReady(),this),this.onSuccess=e=>(this._onSuccess=e,this),this.onError=e=>(this._onError=e,this),this.onClose=e=>(this._onClose=e,this),this.getValidate=()=>{if(!this._taskResponse)throw new Error("Geetest not solved yet");return{geetest_challenge:this._taskResponse.challenge,geetest_validate:this._taskResponse.validate,geetest_seccode:this._taskResponse.seccode}},this.reset=()=>{},this.destroy=()=>{const e=document.querySelector(this._containerSelector);if(!e)throw new Error("GeeTest container not found");const t=e.querySelector(".geetest_holder");null==t||t.remove()},this.verify=()=>{this.startResolving()},this._config=n,window.addEventListener("message",(e=>{"geetestTaskResponse"===e.data.type&&(this._taskResponse=e.data.params,this.setResponse(),"function"==typeof this._onSuccess&&this._onSuccess())}))}}const s=e=>(e,t)=>{"function"==typeof t&&t(new Geetest(e))};let o;window.initGeetest&&(o=s(window.initGeetest)),Object.defineProperty(window,"initGeetest",{set(e){o=s()},get:()=>o,configurable:!0}),(()=>{let e;const t=setInterval((()=>{e=window.initGeetest4,function(e){let t=!1;const n={js:"script",css:"link"}[e.split(".").pop()];if(void 0!==n){const s=document.getElementsByTagName(n);for(const n in s)(s[n].href&&s[n].href.toString().indexOf(e)>0||s[n].src&&s[n].src.toString().indexOf(e)>0)&&(t=!0)}return t}("gt4.js")&&(Object.defineProperty(window,"initGeetest4",{get:function(){return s},set:function(t){e=t},configurable:!0}),clearInterval(t))}),1),n=e=>{var t,n;(()=>{const e=document.querySelector(".geetest_captcha");e&&e.insertAdjacentHTML("beforeend",'<div class="geetest_holder geetest_wind geetest_detect" style="display: none;">\n              <input type="hidden" name="captcha_id">\n              <input type="hidden" name="lot_number">\n              <input type="hidden" name="pass_token">\n              <input type="hidden" name="gen_time">\n              <input type="hidden" name="captcha_output">\n            </div>')})();const s=".geetest_captcha";if(!document.querySelector(s))return;const o=document.querySelector(".geetest_captcha input[name=captcha_id]");o instanceof HTMLInputElement&&(o.value=e.captcha_id);const i=document.querySelector(".geetest_captcha input[name=lot_number]");i instanceof HTMLInputElement&&(i.value=e.lot_number);const r=document.querySelector(".geetest_captcha input[name=pass_token]");r instanceof HTMLInputElement&&(r.value=e.pass_token);const c=document.querySelector(".geetest_captcha input[name=gen_time]");c instanceof HTMLInputElement&&(c.value=e.gen_time);const a=document.querySelector(".geetest_captcha input[name=captcha_output]");a instanceof HTMLInputElement&&(a.value=e.captcha_output),void 0!==(null===(n=null===(t=window)||void 0===t?void 0:t.captchaObjEventsV4)||void 0===n?void 0:n.onSuccess)&&window.captchaObjEventsV4.onSuccess()},s=function(t,s){const o=function(){const e=function(){if(t&&t.captchaId)return t.captchaId;const e=document.querySelectorAll("script"),n=i(e);return new URL(n).searchParams.get("captcha_id")}();setTimeout((()=>{window.postMessage({type:"geetestCreateTask",params:{gt:e,version:"4",initParameters:{riskType:"slide"},geetestContainerSelector:".geetest_captcha",userAgent:window.navigator.userAgent}},location.origin)}),1e3)};window.addEventListener("message",(e=>{"geetestTaskResponse"===e.data.type&&n(e.data.params)}));const i=function(e){for(let t=0;t<e.length;t++){const n=e[t].getAttribute("src");if("string"==typeof n&&n.indexOf("//gcaptcha4.geetest.com/load")>0)return n}return null},r=function(){return{captcha_id:document.querySelector("input[name=captcha_id]").value,lot_number:document.querySelector("input[name=lot_number]").value,pass_token:document.querySelector("input[name=pass_token]").value,gen_time:document.querySelector("input[name=gen_time]").value,captcha_output:document.querySelector("input[name=captcha_output]").value}},c={onSuccess:()=>{},onError:()=>{},onClose:()=>{}};e(t,(e=>{const t=new Proxy(e,{get:function(e,t){switch(t){case"onReady":case"appendTo":return o(),e[t];case"getValidate":return document.querySelector("input[name=captcha_id]").value?r:e[t];case"onSuccess":return function(e){c.onSuccess=e};case"onError":return function(e){c.onError=e};case"onClose":return function(e){c.onClose=e};default:return e[t]}}});window.captchaObjV4=t,window.captchaObjEventsV4=c,s(t)}))}})()})()})();